<!DOCTYPE html><head><meta charset="UTF-8"><title>CompositionDT | Zapdos</title><link href="../../contrib/materialize/materialize.min.css" type="text/css" rel="stylesheet" media="screen,projection"></link><link href="../../contrib/prism/prism.min.css" type="text/css" rel="stylesheet"></link><link href="../../css/moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/devel_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/alert_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/content_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/sqa_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/civet_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/zapdos.css" type="text/css" rel="stylesheet"></link><script type="text/javascript" src="../../contrib/jquery/jquery.min.js"></script></head><body><div class="page-wrap"><header><nav><div class="nav-wrapper container"><a href="../../index.html" class="left moose-logo hide-on-med-and-down" id="home-button">Zapdos</a><a href="https://github.com/shannon-lab/zapdos" class="right"><img src="../../media/framework/github-logo.png" class="github-mark"></img><img src="../../media/framework/github-mark.png" class="github-logo"></img></a><ul class="right hide-on-med-and-down"><li><a href="#!" class="dropdown-trigger" data-target="e5f236cb-54e3-4ea4-8b42-d0d10e71fd2c" data-constrainWidth="false">Getting Started<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="1991cfda-66be-453a-a927-66ddb68aa5cd" data-constrainWidth="false">Documentation<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="3ed4ab00-8cd6-4f78-a5a8-b9b35876aff4" data-constrainWidth="false">Help<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="../../citing.html">Citing</a></li></ul><a href="#" class="sidenav-trigger" data-target="410567cd-3db2-4f9c-b18b-7c6df6244cf1"><i class="material-icons">menu</i></a><ul class="sidenav" id="410567cd-3db2-4f9c-b18b-7c6df6244cf1"><li><a href="#!" class="dropdown-trigger" data-target="d1978dd1-db56-434b-a68f-cad8fe3c06dd" data-constrainWidth="false">Getting Started<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="d70e5a6f-311c-4528-9f14-8d4a4ef6376f" data-constrainWidth="false">Documentation<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="#!" class="dropdown-trigger" data-target="07384f00-f7ec-4f8c-99fc-5e4ac13efae0" data-constrainWidth="false">Help<i class="material-icons right">arrow_drop_down</i></a></li><li><a href="../../citing.html">Citing</a></li></ul><a href="#moose-search" class="modal-trigger"><i class="material-icons">search</i></a></div><ul class="dropdown-content" id="e5f236cb-54e3-4ea4-8b42-d0d10e71fd2c"><li><a href="../../getting_started/installation.html">Installation</a></li><li><a href="../../getting_started/using_zapdos.html">Using Zapdos</a></li><li><a href="../../getting_started/zapdos_meshing.html">Generating Meshes</a></li><li><a href="../../tutorial/index.html">Tutorial Slides</a></li></ul><ul class="dropdown-content" id="1991cfda-66be-453a-a927-66ddb68aa5cd"><li><a href="../../syntax/zapdos_only.html">Zapdos Input Syntax</a></li><li><a href="../../syntax/index.html">Complete Code Syntax</a></li><li><a href="https://mooseframework.inl.gov/docs/doxygen/moose/classes.html">MOOSE Doxygen</a></li><li><a href="https://mooseframework.inl.gov/docs/doxygen/libmesh/classes.html">libMesh Doxygen</a></li><li><a href="../../a-to-z.html">Zapdos A to Z Index</a></li><li><a href="../../examples/crane_examples.html">CRANE Examples</a></li><li><a href="../../development/contributing.html">Contributing Guidelines</a></li><li><a href="../../development/code_standards.html">Code Standards</a></li><li><a href="../../publications.html">List of Publications</a></li></ul><ul class="dropdown-content" id="3ed4ab00-8cd6-4f78-a5a8-b9b35876aff4"><li><a href="https://github.com/shannon-lab/zapdos/discussions">Zapdos Discussions Forum</a></li><li><a href="../../development/zapdos_developer_info.html">Zapdos Developer Information</a></li><li><a href="https://github.com/idaholab/moose/discussions">MOOSE Discussions Forum</a></li><li><a href="https://mooseframework.inl.gov/">MOOSE Homepage</a></li><li><a href="../../development/moose_developer_info.html">MOOSE Developer Information</a></li></ul><ul class="dropdown-content" id="d1978dd1-db56-434b-a68f-cad8fe3c06dd"><li><a href="../../getting_started/installation.html">Installation</a></li><li><a href="../../getting_started/using_zapdos.html">Using Zapdos</a></li><li><a href="../../getting_started/zapdos_meshing.html">Generating Meshes</a></li><li><a href="../../tutorial/index.html">Tutorial Slides</a></li></ul><ul class="dropdown-content" id="d70e5a6f-311c-4528-9f14-8d4a4ef6376f"><li><a href="../../syntax/zapdos_only.html">Zapdos Input Syntax</a></li><li><a href="../../syntax/index.html">Complete Code Syntax</a></li><li><a href="https://mooseframework.inl.gov/docs/doxygen/moose/classes.html">MOOSE Doxygen</a></li><li><a href="https://mooseframework.inl.gov/docs/doxygen/libmesh/classes.html">libMesh Doxygen</a></li><li><a href="../../a-to-z.html">Zapdos A to Z Index</a></li><li><a href="../../examples/crane_examples.html">CRANE Examples</a></li><li><a href="../../development/contributing.html">Contributing Guidelines</a></li><li><a href="../../development/code_standards.html">Code Standards</a></li><li><a href="../../publications.html">List of Publications</a></li></ul><ul class="dropdown-content" id="07384f00-f7ec-4f8c-99fc-5e4ac13efae0"><li><a href="https://github.com/shannon-lab/zapdos/discussions">Zapdos Discussions Forum</a></li><li><a href="../../development/zapdos_developer_info.html">Zapdos Developer Information</a></li><li><a href="https://github.com/idaholab/moose/discussions">MOOSE Discussions Forum</a></li><li><a href="https://mooseframework.inl.gov/">MOOSE Homepage</a></li><li><a href="../../development/moose_developer_info.html">MOOSE Developer Information</a></li></ul></nav><div class="modal modal-fixed-footer moose-search-modal" id="moose-search"><div class="modal-content container moose-search-modal-content"><div class="row"><div class="col l12"><div class="input-field"><input type_="text" onkeyup="mooseSearch()" placeholder="/index.md" id="moose-search-box"></input></div></div><div><div class="col s12" id="moose-search-results"></div></div></div></div><div class="modal-footer"><a href="#!" class="modal-close btn-flat">Close</a></div></div></header><main class="main"><div class="container"><div class="row"><div class="col hide-on-med-and-down l12"><nav class="breadcrumb-nav"><div class="nav-wrapper"><a href=".." class="breadcrumb">source</a><span class="breadcrumb">timesteppers</span><a href="#" class="breadcrumb">CompositionDT</a></div></nav></div></div><div class="row"><div class="moose-content col s12 m12 l10"><section id="4c2fd1b7-f279-4e8d-9171-cbbcd2642204" data-section-level="1" data-section-text="CompositionDT"><h1 id="compositiondt">CompositionDT</h1><p>The time stepper takes all the other time steppers as input and returns the minimum time step size.</p><section class="scrollspy" id="c0d6b8f5-62f5-4387-ad43-330bab2cc210" data-section-level="2" data-section-text="Description"><h2 id="description">Description</h2><p>The <code>CompositionDT</code> TimeStepper takes multiple time steppers as input and computes the minimum time step size among all time steppers as output. If any time sequence stepper(s) is supplied for input, CompositionDT will compare the computed minimum time step size with the one needs to hit the time point, then select the smaller value as output. An optional parameter <a href="#1d504169-b400-46a3-9130-bc3556090bbd" class="moose-modal-link modal-trigger">&quot;lower_bound&quot;</a>is provided to set a lower bound for the computed time step size, and enable growth driven by a single time stepper.</p><p>The composition rules are listed with priority rank: 1. The time points from time sequence stepper(s) <strong>must</strong> be hit; 2. The time step size can not go below the <a href="#1ccb9f14-9540-4bfd-82e6-7220fe3a343f" class="moose-modal-link modal-trigger">&quot;lower_bound&quot;</a>; 3. Take the minimum time step value of all input time steppers.</p><p>An example of using multiple time steppers:</p><pre style="max-height:350px;"><code class="language-moose">[Executioner&lt;&lt;&lt;{&quot;href&quot;: &quot;../../syntax/Executioner/index.html&quot;}&gt;&gt;&gt;]
  type = Transient
  end_time = 0.8
  solve_type = PJFNK
  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre boomeramg&#x27;
  # Use as many different time steppers as we could to test the compositionDT,
  # SolutionTimeAdaptiveDT give slightly different dt per run, set rel_err = 1e-2
  # to ensure the test won&#x27;t fail due to the small difference in the high-digit.
  [TimeSteppers&lt;&lt;&lt;{&quot;href&quot;: &quot;../../syntax/Executioner/TimeSteppers/index.html&quot;}&gt;&gt;&gt;]
    [ConstDT1]
      type = ConstantDT&lt;&lt;&lt;{&quot;description&quot;: &quot;Timestepper that takes a constant time step size&quot;, &quot;href&quot;: &quot;ConstantDT.html&quot;}&gt;&gt;&gt;
      dt&lt;&lt;&lt;{&quot;description&quot;: &quot;Size of the time step&quot;}&gt;&gt;&gt; = 0.2
    []

    [FunctionDT]
      type = FunctionDT&lt;&lt;&lt;{&quot;description&quot;: &quot;Timestepper whose steps vary over time according to a user-defined function&quot;, &quot;href&quot;: &quot;FunctionDT.html&quot;}&gt;&gt;&gt;
      function&lt;&lt;&lt;{&quot;description&quot;: &quot;The name of the time-dependent function that prescribes the time step size.&quot;}&gt;&gt;&gt; = dts
    []

    [LogConstDT]
      type = LogConstantDT&lt;&lt;&lt;{&quot;description&quot;: &quot;TimeStepper which imposes a time step constant in the logarithmic space&quot;, &quot;href&quot;: &quot;LogConstantDT.html&quot;}&gt;&gt;&gt;
      log_dt&lt;&lt;&lt;{&quot;description&quot;: &quot;Time step in log10(time)&quot;}&gt;&gt;&gt; = 0.2
      first_dt&lt;&lt;&lt;{&quot;description&quot;: &quot;Initial time step (in absolute time)&quot;}&gt;&gt;&gt; = 0.1
    []

    [IterationAdapDT]
      type = IterationAdaptiveDT&lt;&lt;&lt;{&quot;description&quot;: &quot;Adjust the timestep based on the number of iterations&quot;, &quot;href&quot;: &quot;IterationAdaptiveDT.html&quot;}&gt;&gt;&gt;
      dt&lt;&lt;&lt;{&quot;description&quot;: &quot;The default timestep size between solves&quot;}&gt;&gt;&gt; = 0.5
    []

    [Timesequence]
      type = TimeSequenceStepper&lt;&lt;&lt;{&quot;description&quot;: &quot;Solves the Transient problem at a sequence of given time points.&quot;, &quot;href&quot;: &quot;TimeSequenceStepper.html&quot;}&gt;&gt;&gt;
      time_sequence&lt;&lt;&lt;{&quot;description&quot;: &quot;The values of t&quot;}&gt;&gt;&gt; = &#x27;0  0.25 0.3 0.5 0.8&#x27;
    []

    [PPDT]
      type = PostprocessorDT&lt;&lt;&lt;{&quot;description&quot;: &quot;Computes timestep based on a Postprocessor value.&quot;, &quot;href&quot;: &quot;PostprocessorDT.html&quot;}&gt;&gt;&gt;
      postprocessor&lt;&lt;&lt;{&quot;description&quot;: &quot;The name of the postprocessor that computes the dt&quot;}&gt;&gt;&gt; = PostDT
      dt&lt;&lt;&lt;{&quot;description&quot;: &quot;Initial value of dt&quot;}&gt;&gt;&gt; = 0.1
    []
  []
[]</code></pre><a class="moose-source-filename tooltipped modal-trigger" href="#a844cb64-aead-4f5b-8bf2-fdeb97e4aa68">(moose/test/tests/time_steppers/time_stepper_system/multiple_timesteppers.i)</a></section><section class="scrollspy" id="f75c12ee-aab4-430a-b5e0-f33659ccff78" data-section-level="2" data-section-text="Input Parameters"><h2 id="input-parameters">Input Parameters</h2><section id="b28e56df-f02b-457c-bf28-a508c1ef8f9a" data-section-level="3" data-section-text="Optional Parameters" data-details-open="open"><details class="moose-section-content" open="open"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">cutback_factor_at_failure</span><span class="moose-parameter-header-default">0.5</span><span class="moose-parameter-header-description">Factor to apply to timestep if a time step fails to converge.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>0.5</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>double</p><p class="moose-parameter-description-doc-unit"><span>Unit:</span>(no unit assumed)</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>Factor to apply to timestep if a time step fails to converge.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">initial_dt</span><span class="moose-parameter-header-description">Initial value of dt</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>double</p><p class="moose-parameter-description-doc-unit"><span>Unit:</span>(no unit assumed)</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>Initial value of dt</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">lower_bound</span><span class="moose-parameter-header-description">The maximum of these TimeSteppers will form the lower bound on the time step size. A single or multiple time steppers may be specified.</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector&lt;std::string&gt;</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>The maximum of these TimeSteppers will form the lower bound on the time step size. A single or multiple time steppers may be specified.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">reset_dt</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">Use when restarting a calculation to force a change in dt.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>Use when restarting a calculation to force a change in dt.</p></div></li></ul><summary><h3 data-details-open="open"><span class="moose-section-icon"></span>Optional Parameters</h3></summary></details></section><section id="392a81bd-9388-4138-b4eb-1d244a95f972" data-section-level="3" data-section-text="Advanced Parameters" data-details-open="close"><details class="moose-section-content"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">control_tags</span><span class="moose-parameter-header-description">Adds user-defined labels for accessing object parameters via control logic.</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector&lt;std::string&gt;</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>Adds user-defined labels for accessing object parameters via control logic.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">enable</span><span class="moose-parameter-header-default">True</span><span class="moose-parameter-header-description">whether or not to enable the time stepper</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>True</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>Yes</p><p class="moose-parameter-description"><span>Description:</span>whether or not to enable the time stepper</p></div></li></ul><summary><h3 data-details-open="close"><span class="moose-section-icon"></span>Advanced Parameters</h3></summary></details></section></section></section><div class="moose-modal modal" id="1d504169-b400-46a3-9130-bc3556090bbd"><div class="modal-content"><h4>lower_bound</h4><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector&lt;std::string&gt;</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>The maximum of these TimeSteppers will form the lower bound on the time step size. A single or multiple time steppers may be specified.</p></div></div><div class="moose-modal modal" id="1ccb9f14-9540-4bfd-82e6-7220fe3a343f"><div class="modal-content"><h4>lower_bound</h4><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector&lt;std::string&gt;</p><p class="moose-parameter-description-controllable"><span>Controllable:</span>No</p><p class="moose-parameter-description"><span>Description:</span>The maximum of these TimeSteppers will form the lower bound on the time step size. A single or multiple time steppers may be specified.</p></div></div><div class="moose-modal modal" id="a844cb64-aead-4f5b-8bf2-fdeb97e4aa68"><div class="modal-content"><h4>(moose/test/tests/time_steppers/time_stepper_system/multiple_timesteppers.i)</h4><pre style="max-height:350px;"><code class="language-moose">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 10
[]

[Variables]
  [u]
  []
[]

[Kernels]
  [diff]
    type = CoefDiffusion
    variable = u
    coef = 0.1
  []
  [time]
    type = TimeDerivative
    variable = u
  []
[]

[Functions]
  [dts]
    type = PiecewiseLinear
    x = &#x27;0   0.85 2&#x27;
    y = &#x27;0.2 0.15  0.2&#x27;
  []
[]

[BCs]
  [left]
    type = DirichletBC
    variable = u
    boundary = left
    value = 0
  []
  [right]
    type = DirichletBC
    variable = u
    boundary = right
    value = 1
  []
[]

[Executioner]
  type = Transient
  end_time = 0.8
  solve_type = PJFNK
  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre boomeramg&#x27;
  # Use as many different time steppers as we could to test the compositionDT,
  # SolutionTimeAdaptiveDT give slightly different dt per run, set rel_err = 1e-2
  # to ensure the test won&#x27;t fail due to the small difference in the high-digit.
  [TimeSteppers]
    [ConstDT1]
      type = ConstantDT
      dt = 0.2
    []

    [FunctionDT]
      type = FunctionDT
      function = dts
    []

    [LogConstDT]
      type = LogConstantDT
      log_dt = 0.2
      first_dt = 0.1
    []

    [IterationAdapDT]
      type = IterationAdaptiveDT
      dt = 0.5
    []

    [Timesequence]
      type = TimeSequenceStepper
      time_sequence  = &#x27;0  0.25 0.3 0.5 0.8&#x27;
    []

    [PPDT]
      type = PostprocessorDT
      postprocessor = PostDT
      dt = 0.1
    []
  []
[]

[Postprocessors]
  [timestep]
    type = TimePostprocessor
    execute_on = &#x27;timestep_end&#x27;
  []

  [PostDT]
    type = ElementAverageValue
    variable = u
    execute_on = &#x27;initial timestep_end&#x27;
  []
[]

[Outputs]
  csv = true
  file_base=&#x27;multiple_timesteppers&#x27;
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div></div><div class="col hide-on-med-and-down l2"><div class="toc-wrapper pin-top"><ul class="section table-of-contents"><li><a href="#c0d6b8f5-62f5-4387-ad43-330bab2cc210" class="tooltipped" data-position="left" data-tooltip="Description">Description</a></li><li><a href="#f75c12ee-aab4-430a-b5e0-f33659ccff78" class="tooltipped" data-position="left" data-tooltip="Input Parameters">Input Parameters</a></li></ul></div></div></div></div></main></div></body><script type="text/javascript" src="../../contrib/materialize/materialize.min.js"></script><script type="text/javascript" src="../../contrib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="../../contrib/prism/prism.min.js"></script><script type="text/javascript" src="../../js/init.js"></script><script type="text/javascript" src="../../js/navigation.js"></script><script type="text/javascript" src="../../contrib/fuse/fuse.min.js"></script><script type="text/javascript" src="../../js/search_index.js"></script><script type="text/javascript" src="../../js/sqa_moose.js"></script><script type="text/javascript" src="../../js/moose_input_parser.js"></script>